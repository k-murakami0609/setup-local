eval $(/opt/homebrew/bin/brew shellenv)
eval "$(mise activate zsh)"

autoload -Uz colors
colors

autoload -U compinit
compinit

PROMPT="
%n@[development](%*)%{${fg[cyan]}%}%~%{${reset_color}%}
%{${fg[red]}%}$%{${reset_color}%}"

: "alias" && {
	alias ll='ls -la -G'
	alias ls='ls -G'
}

: "プラグイン系" && {
  export ZPLUG_HOME=$(brew --prefix)/opt/zplug
  source $ZPLUG_HOME/init.zsh

  zplug "zsh-users/zsh-syntax-highlighting"
  zplug "b4b4r07/enhancd", use:init.sh

  # check コマンドで未インストール項目があるかどうか verbose にチェックし
  # false のとき（つまり未インストール項目がある）y/N プロンプトで
  # インストールする
  if ! zplug check --verbose; then
      printf "Install? [y/N]: "
      if read -q; then
          echo; zplug install
      fi
  fi

  # プラグインを読み込み、コマンドにパスを通す
  zplug load --verbose

  source ~/zsh_settings/chpwd_for_zsh.sh
  source ~/zsh_settings/claude.sh
}

: "補完系" && {
  unsetopt auto_menu

  setopt no_beep
  setopt AUTO_PARAM_SLASH
  zstyle ':completion:*:warnings' format $RED'No matches for:'$YELLOW' %d'$DEFAULT
  zstyle ':completion:*' menu select interactive
  setopt menu_complete
}

: "ヒストリ関連の設定" && {
  HISTFILE=$HOME/.zsh_history # ヒストリファイル名
  HISTSIZE=10000 # メモリに保存される履歴の件数
  SAVEHIST=10000 # 履歴ファイルに保存される履歴の件数
  setopt hist_ignore_dups # 直前と同じコマンドをヒストリに追加しない
  setopt hist_ignore_all_dups # 重複するコマンドは古い法を削除する
  setopt share_history # 異なるウィンドウでコマンドヒストリを共有する
  setopt hist_no_store # historyコマンドは履歴に登録しない
  setopt hist_reduce_blanks # 余分な空白は詰めて記録
  setopt hist_verify # `!!`を実行したときにいきなり実行せずコマンドを見せる

  function peco-history-selection() {
    BUFFER=`history -n 1 | tail -r  | awk '!a[$0]++' | peco`
    CURSOR=$#BUFFER
    zle reset-prompt
  }

  zle -N peco-history-selection
  bindkey '^R' peco-history-selection
}

: "GHQ系の設定" && {
    alias g='cd $(ghq root)/$(ghq list | peco)'
}

source /Users/murakamikeiji/Desktop/project/github.com/babarot/enhancd/init.sh

# export RUST_SRC_PATH="$(rustc --print sysroot)/lib/rustlib/src/rust/src"